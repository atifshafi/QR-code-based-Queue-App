<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/html'>
<head>
  <title>Mehndi Queue App</title>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css' rel='stylesheet' />
  <link href='https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.9.0/mdb.min.css' rel='stylesheet' />
  <link href='https://fonts.googleapis.com/icon?family=Material+Icons' rel='stylesheet'>
  <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css' rel='stylesheet'>
  <link href='https://unpkg.com/swiper/swiper-bundle.min.css' rel='stylesheet' />
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css'>
  <link href='https://fonts.googleapis.com/css?family=Dancing+Script&display=swap' rel='stylesheet'>
  <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.9.0/mdb.min.js'></script>
  <script src='https://unpkg.com/swiper/swiper-bundle.min.js'></script>
  <script src='https://code.jquery.com/jquery-3.6.0.min.js'
          integrity='sha384-KyZXEAg3QhqLMpG8r+Knujsl5/5v5z5f!!1tlR3tvDhLnggM9EVR1gjadAq0mDvJ'
          crossorigin='anonymous'></script>
  <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js'
          integrity='sha384-pzjw8f+ua7Kw1TIq0v8FqFjcJ6pajs/rfdfs3SO+kD4Ck5BdPtF+to8xMko0pbl'
          crossorigin='anonymous'></script>
  <script src='https://code.jquery.com/jquery-3.6.0.min.js'></script>


  <style>
      body.main-background {
          position: relative;
          background-color: black;
          background-image: url('static/image/background-image.jpg');
          background-position: center;
          background-repeat: no-repeat;
          background-size: cover;
          box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.5), 0 0 50px rgba(0, 0, 0, 0.5);
          animation: blurryToClear 2s ease-out 1;
      }

      body {
          overflow-x: hidden;
          background-color: transparent;
      }

      .overlay-container {
          display: flex;
          justify-content: center;
          align-items: center;
          position: relative;
          z-index: 1;
          width: 100%; /* Change the width to 100% */
          height: 85%; /* Adjust the height value as needed */
          margin: 0 auto;
          max-width: 100%;
      }

      .overlay-image {
          position: absolute;
          top: 0;
          left: 520px;
          right: 100px;
          bottom: 0;
          width: 20%;
          height: 100%;
          background-image: url('static/image/overlay-image.png');
          background-position: center;
          background-repeat: no-repeat;
          background-size: cover;
      }


      .overlay-text {
          position: relative;
          z-index: 2;
      }

      img.welcome-image {
          width: 300px;
          height: 300px;
          object-fit: cover;
          animation: fadeIn 0s ease-out 1;
          border-radius: 50%;
      }

      .welcome-image-wrapper {
          display: inline-block;
          position: relative;
          width: 300px;
          height: 300px;
          border-radius: 50%;
          overflow: hidden;
      }

      .welcome-image-wrapper::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border-radius: 50%;
          background-image: radial-gradient(circle, rgba(255, 255, 255, 0) 60%, rgba(255, 255, 255, 0.6) 100%);
          pointer-events: none;
      }


      .navbar-collapse {
          transition: max-height 0.3s ease;
          overflow: hidden;
          max-height: 0;
      }

      .navbar-collapse.show {
          max-height: 100px; /* Adjust the max-height according to your menu items */
      }


      .card-container {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
      }

      .rest-of-content {
          animation: fadeIn 2s ease-out 1;
      }

      .artsy-text {
          font-family: 'Dancing Script', cursive;
          font-size: 55px; /* Adjust the font size as needed */
          font-weight: bold;
          color: #3e782e; /* Adjust the color as needed */
          text-shadow: 1px 1px 0px #0b2104, 1px 1px 0px #0b2104, 2px 2px 0px #0b2104, 3px 3px 0px #0b2104;
          z-index: 2;
          position: relative;
      }

      /*img.fixed-size {*/
      /*    width: 350px;*/
      /*    height: 350px;*/
      /*    object-fit: cover;*/
      /*    object-position: center;*/
      /*}*/

      @keyframes fadeIn {
          0% {
              opacity: 0;
          }
          100% {
              opacity: 1;
          }
      }

      @keyframes fadeInDelayed {
          0%, 50% {
              opacity: 0;
          }
          100% {
              opacity: 1;
          }
      }

      @keyframes blurryToClear {
          0% {
              filter: blur(8px);
          }
          100% {
              filter: blur(0px);
          }
      }


      #image-gallery {
          margin-bottom: 50px; /* Adjust this value to increase or decrease the gap */
      }

      .card {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          width: 100%;
          background-color: #2c2727;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
      }

      .fixed-size {
          width: 100%;
          height: auto;
          object-fit: cover;
          object-position: center;
          /*aspect-ratio: 4 / 5;*/
      }

      @media screen and (min-width: 768px) {
          .fixed-size {
              width: 600px;
              height: auto;
              /*aspect-ratio: 4 / 5;*/
          }
      }

      .card-img-container {
          width: 100%;
          display: flex;
          justify-content: center;
          overflow: hidden;
          background-color: black;
      }

      .card-body {
          width: 100%;
          text-align: center; /* Align the text to the center */
      }

      .overlay-text h2 {
          margin: 0;
          padding: 0;
      }

      .image-title {
          color: #c5c5c5;
          margin-bottom: 0;
      }

      /* Swiper Styles */
      .swiper-container {
          width: 100%;
          height: 100%;
          overflow: hidden;
      }

      .swiper-slide {
          display: flex;
          justify-content: center;
          align-items: center;
          padding-left: 5px;
          padding-right: 5px;
      }

      /* Stylized navigation buttons */
      .swiper-button-next,
      .swiper-button-prev {
          color: #007bff;
          width: 15px;
          height: 35px;
          border-radius: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          position: absolute;
          transform: translateY(-50%);
          top: 65%; /* Change this value to adjust the vertical position of the buttons */
          transition: transform 0.3s ease;
      }

      .swiper-button-next {
          right: 18px;
      }

      .swiper-button-prev {
          left: 18px;
      }

      /* Button hover effect */
      .swiper-button-next:hover,
      .swiper-button-prev:hover {
          color: #007bff;
          transform: translateY(-50%) scale(1.1);
      }

      .page-footer {
          background-color: #333;
          color: #fff;
          padding: 30px 0;
      }

      .page-footer a {
          color: #fff;
          text-decoration: none;
      }

      .page-footer a:hover {
          color: #ccc;
      }

      .contact-title {
          font-size: 20px;
          margin-bottom: 20px;
      }

      .footer-icon {
          display: inline-block;
          vertical-align: middle;
      }

      .footer-text {
          display: inline-block;
          vertical-align: middle;
          margin-left: 10px;
      }

      .footer-item {
          margin-bottom: 10px;
      }

      .footer-divider {
          background-color: #555;
          height: 2px;
          width: 70px;
          margin-bottom: 20px;
      }

      .welcome-image {
          box-shadow: 0 8px 12px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
          transform: translateY(-8px);
          transition: all 0.3s ease;
      }

      .welcome-image:hover {
          box-shadow: 0 16px 24px rgba(0, 0, 0, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);
          transform: translateY(-16px);
      }

      .remove-button-container {
          display: flex;
          justify-content: center;
          align-items: center;
      }

      @media screen and (max-width: 767px) {
          .swiper-container {
              height: auto;
          }
      }


      /* Add this style for the position adjustment */
      @media screen and (max-width: 991px) {
          .overlay-image {
              left: 0;
              right: 0;
              margin: auto;
          }
      }

      .flash-message-text-center {
          text-align: center;
      }

  </style>
</head>

<body class='main-background'>
<header>
  <nav class='navbar navbar-light bg-light'>
    <div class='container-fluid'>
      <button class='navbar-toggler' type='button' data-toggle='collapse' data-target='#navbarNav'>
        <span class='navbar-toggler-icon'></span>
      </button>
      <div class='collapse navbar-collapse' id='navbarNav'>
        <ul class='navbar-nav'>
          <li class='nav-item'>
            <a class='nav-link font-weight-bold' href='/customers'>Clients</a>
          </li>
          {% if 'admin_logged_in' in session %}
          <li class='nav-item'>
            <a class='nav-link' href='/logout'>Logout</a>
          </li>
          {% else %}
          <li class='nav-item'>
            <a class='nav-link' href='/login'>Login</a>
          </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>
</header>


<main>
  <section class='container my-5'>
    <div class='text-center mb-4'>
      <div class='welcome-image-wrapper'>
        <img src="{{ url_for('static', filename='image/welcome_image.jpg') }}" alt='Welcome' class='welcome-image'>
      </div>
    </div>
    <div class='rest-of-content'>
      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      <div class='flash-message-container'>
        {% for category, message in messages %}
        <div class='alert alert-{{ category }} mt-3 flash-message-text-center' role='alert'>
          {{ message }}
        </div>
        {% endfor %}
      </div>

      {% endif %}
      {% endwith %}
  </section>
  <section id='image-gallery' class='container'>
    <!-- Add this line to wrap the text you want the 'overlay_image' around -->
    <div class='overlay-container'>
      <div class='overlay-image'></div>
      <div class='overlay-text'>
        <h2 class='text-center mb-4 artsy-text'>Gallery</h2>
      </div>
    </div>
    <!-- Initialize Swiper -->
    <div class='card-container'>
      <div class='swiper-container'>
        <div class='swiper-wrapper'>
          {% for image in images %}
          <div class='swiper-slide'>
            <div class='card'>
              <div class='card-img-container'>
                <img src="{{ url_for('serve_image', image_id=image._id) }}" class='card-img-top fixed-size'
                     alt='{{ image.title }}'>
              </div>
              <div class='card-body'>
                <h5 class='card-title text-center image-title'>{{ image.title }}</h5>
                {% if session.admin_logged_in %}
                <div class='remove-button-container'>
                  <button class='btn btn-danger btn-sm remove-image-btn' data-image-id='{{ image._id }}'
                          onclick='removeImage({{ image._id }})'>Remove
                  </button>
                </div>
                {% endif %}
              </div>
            </div>
          </div>
          {% endfor %}
        </div>

        <!-- Add Navigation -->
        <div class='swiper-button-next'></div>
        <div class='swiper-button-prev'></div>
      </div>
    </div>
  </section>

  {% if session.admin_logged_in %}
  <div class='text-center my-3'>
    <button type='button' class='btn btn-secondary' data-bs-toggle='modal' data-bs-target='#uploadImageModal'>
      Add Image
    </button>
  </div>

  <!-- Add Image Modal -->
  <div class='modal fade' id='uploadImageModal' tabindex='-1' aria-labelledby='uploadImageModalLabel'
       aria-hidden='true'>
    <div class='modal-dialog'>
      <div class='modal-content'>
        <div class='modal-header'>
          <h5 class='modal-title' id='uploadImageModalLabel'>Upload Image</h5>
          <button type='button' class='btn-close' data-bs-dismiss='modal' aria-label='Close'></button>
        </div>
        <div class='modal-body'>
          <form action="{{ url_for('upload_image') }}" method='POST' enctype='multipart/form-data'>
            <div class='mb-3'>
              <label for='imageTitle' class='form-label'>Title</label>
              <input type='text' class='form-control' id='imageTitle' name='title' required>
            </div>
            <div class='mb-3'>
              <label for='imageFile' class='form-label'>Select Image</label>
              <input type='file' class='form-control' id='imageFile' name='image' accept='image/*' required>
            </div>
            <button type='submit' class='btn btn-primary'>Upload Image</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  {% endif %}


  <!-- Add footer -->
  <footer class='page-footer font-small unique-color-dark pt-4'>
    <div class='container text-center text-md-left'>
      <div class='row mt-3'>
        <div class='col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4'>
          <h6 class='text-uppercase font-weight-bold contact-title'>Contact</h6>
          <hr class='footer-divider'>
          <div class='footer-item'>
            <a href='https://www.instagram.com/henna_by_naba/' target='_blank' rel='noopener noreferrer'>
              <i class='fab fa-instagram footer-icon'></i>
              <span class='footer-text'>henna_by_naba</span>
            </a>
          </div>
          <div class='footer-item'>
            <a href='https://www.instagram.com/basus_mehndi_art/' target='_blank' rel='noopener noreferrer'>
              <i class='fab fa-instagram footer-icon'></i>
              <span class='footer-text'>basus_mehndi_art</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </footer>
  </div>
</main>
<script>

  function toggleNavbar() {
    const navbar = document.getElementById('navbarNav')
    navbar.classList.toggle('collapsing')
    if (navbar.style.maxHeight) {
      navbar.style.maxHeight = null
    } else {
      navbar.style.maxHeight = navbar.scrollHeight + 'px'
    }
  }


  document.addEventListener('DOMContentLoaded', function() {
    const swiper = new Swiper('.swiper-container', {
      slidesPerView: 'auto',
      spaceBetween: 10,
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev'
      },
      breakpoints: {
        640: {
          slidesPerView: 2,
          spaceBetween: 20
        },
        768: {
          slidesPerView: 3,
          spaceBetween: 40
        },
        1024: {
          slidesPerView: 4,
          spaceBetween: 50
        }
      }
    })
  })
</script>
</body>
<script src='https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js'></script>
<script>
  $(document).ready(function() {
    $('[data-toggle="collapse"]').click(function() {
      const target = $(this).data('target')
      $(target).toggleClass('show')
    })
  })
</script>
{% if session.admin_logged_in %}
<script>
  async function removeImage(imageId) {

    // Prompt for confirmation before deleting
    const confirmDelete = window.confirm('Are you sure you want to delete this image?')

    // If the user confirms deletion, proceed with the deletion process
    if (confirmDelete) {
      try {
        const response = await fetch(`/remove_image/${imageId}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ image_id: imageId })
        })

        if (response.status === 200) {
          // Refresh the page to update the gallery after successful deletion
          location.reload()
        } else {
          console.error('Failed to remove the image')
        }
      } catch (err) {
        console.error('Error occurred while removing the image:', err)
      }
    }
  }
</script>
{% endif %}
</html>
